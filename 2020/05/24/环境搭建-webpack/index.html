
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="爱前端的安安">
    <title>环境搭建-webpack - 爱前端的安安</title>
    <meta name="author" content="爱前端的安安">
    
    
        <link rel="icon" href="http://yoursite.com/assets/images/test.png">
    
    
    <meta name="description" content="搭建一个简单前端项目的步骤和操作方法">
<meta property="og:type" content="blog">
<meta property="og:title" content="环境搭建-webpack">
<meta property="og:url" content="http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/index.html">
<meta property="og:site_name" content="爱前端的安安">
<meta property="og:description" content="搭建一个简单前端项目的步骤和操作方法">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-05-24T13:40:53.000Z">
<meta property="article:modified_time" content="2020-06-10T09:24:08.531Z">
<meta property="article:author" content="爱前端的安安">
<meta property="article:tag" content="webpack">
<meta name="twitter:card" content="summary">
    
        <meta rel="publisher" content="https://plus.google.com/99999"/>
    
    
        
    
    
        <meta property="og:image" content="http://yoursite.com/assets/images/test1.gif"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-ejlztp1tasruqfvoz6xmgqng0anzae8ox7cqjj5yibieqgcmhe9fwxfae6zj.min.css">
<link rel="stylesheet" href="/.css" src="/.js">

    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/%20">爱前端的安安</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/test1.gif"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/test1.gif"/>
            </a>
            <span class="sidebar-profile-name">爱前端的安安</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/"
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">首页</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">分类</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">标签</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">归档</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">关于</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="3"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            环境搭建-webpack
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Sun May 24 2020 21:40:53 GMT+0800">
	
		    5月 24, 2020
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/webpack/">webpack</a>


    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <!-- excerpt -->

<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul>
<li>webpack 4</li>
<li>webpack-dev-server</li>
<li>TypeScript3</li>
<li>vscode</li>
</ul>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h5 id="1-创建目录和远程仓库"><a href="#1-创建目录和远程仓库" class="headerlink" title="1. 创建目录和远程仓库"></a>1. 创建目录和远程仓库</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选择 创建一个初始化的md文件</span><br><span class="line"></span><br><span class="line">Add .gitignore 中选择Node</span><br><span class="line"></span><br><span class="line">Add a Licenses 选择MIT lincene：在仓库中包含开源许可，以便于其他人参与</span><br></pre></td></tr></table></figure>


<h5 id="2-npm初始化"><a href="#2-npm初始化" class="headerlink" title="2. npm初始化"></a>2. npm初始化</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">新建一个本地目录，如文件夹命名为：my-ui</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 这里注意地址后加上空格点 ？</span><br><span class="line">在当前根目录下执行：git clone 第一步新建的仓库地址(SSH) .</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; npm初始化</span><br><span class="line">clone完成后，执行：npm init -y</span><br></pre></td></tr></table></figure>
<h5 id="3-新建lib-index-tsx"><a href="#3-新建lib-index-tsx" class="headerlink" title="3. 新建lib/index.tsx"></a>3. 新建lib/index.tsx</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一般情况下库文件是放在lib文件夹下</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; index.tsx</span><br><span class="line">console.log(&#39;hi&#39;);</span><br></pre></td></tr></table></figure>

<h5 id="4-新建webpack-config-js-默认的webpack配置"><a href="#4-新建webpack-config-js-默认的webpack配置" class="headerlink" title="4. 新建webpack.config.js(默认的webpack配置)"></a>4. 新建webpack.config.js(默认的webpack配置)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">安装webpack:</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 回到webpack官网，yarn比npm更能避免一些出错</span><br><span class="line">yarn add webpack webpack-cli --save-dev    (dev表示安装到开发者的依赖中)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 安装时指定版本号</span><br><span class="line">yarn add webpack@4.29.6 webpack-cli@3.2.3 --save-dev</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; pack.json中新生成</span><br><span class="line">&quot;homepage&quot;: &quot;https:&#x2F;&#x2F;github.com&#x2F;fkitty&#x2F;myui-test-01#readme&quot;,</span><br><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">  &quot;awesome-typescript-loader&quot;: &quot;^5.2.1&quot;,</span><br><span class="line">  &quot;webpack&quot;: &quot;^4.29.6&quot;, &#x2F;&#x2F; 向上兼容（^ 6上）</span><br><span class="line">  &quot;webpack-cli&quot;: &quot;^3.2.3&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tsx变成可执行的js,需要运行webpack来进行转义，webpack不知道怎么转义，需要创建一个webpack的配置</span><br><span class="line">1. 配置entry-整个程序的入口是哪里</span><br><span class="line">2. 配置output-输出，代码输出成什么样子（使用umd配置库格式）</span><br><span class="line">3. 配置module.rules(jsx \tsx\ scss)</span><br><span class="line">4. 配置plugins</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">配置文件:(webpack语法与普通的node.js类似)</span><br><span class="line">&#x2F;&#x2F; webpack.config.js</span><br><span class="line">const path &#x3D; require(&#39;path&#39;);</span><br><span class="line">module.export &#x3D; &#123; &#x2F;&#x2F; 导出一个对象</span><br><span class="line">  enrty: &#123;</span><br><span class="line">    index: &#39;.&#x2F;lib&#x2F;index.tsx&#39; &#x2F;&#x2F; 用相对路径，更明确</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F; 到这里还不能编译，因为webpack不知道ts是什么</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F; 配置tsx的解释方式（awesome-typescript-loader）</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        &#x2F;&#x2F; 正则，如何知道某个文件是tsx ?-表示x可有可无 $-表示必须是以这个后缀名结束的文件</span><br><span class="line">        test: &#x2F;\.tsx?$&#x2F;</span><br><span class="line">        &#x2F;&#x2F; loader的名字（安装：yarn add awesome-typescript-loader --dev ）</span><br><span class="line">        loader: &#39;awesome-typescript-loader&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F; 输出</span><br><span class="line">  output: &#123;</span><br><span class="line">    &#x2F;&#x2F; 要使用绝对路径，dirname是当前目录，win要转义 &#39;\\dist&#39;,这样的写法在某些操作系统上是不能运行的</span><br><span class="line">    &lt;!--path: __dirname + &#39;&#x2F;dist&#39;--&gt;</span><br><span class="line">    path: path.resolve(__dirname, &#39;dist&#x2F;lib&#39;) &#x2F;&#x2F; resolve-根据操作系统的类型把参数中的前后目录连接起来</span><br><span class="line">    library: &#39;taq-ui&#39; &#x2F;&#x2F; 库的名字</span><br><span class="line">    libraryTarget: &#39;umd&#39; &#x2F;&#x2F; 库导出定义的目标格式(commonjs umd amd)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 运行webpack</span><br><span class="line">npx webpack</span><br><span class="line"></span><br><span class="line">可能会报错，根据报错信息依次解决问题</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 安装ts</span><br><span class="line">yarn add typescript --dev</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 警告</span><br><span class="line">配置mode： &#39;production&#39; &#x2F;&#x2F; 是生产模式</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 运行成功</span><br><span class="line">当写一个index.tsx  然后运行webpack  就会打包成lib&#x2F;index.js</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">小故事：umd前端历史上的分裂</span><br><span class="line">最开始是没有包管理系统的，所有的js是通过script标签一个一个加载到页面中的，就会导致所有js之间有全局变量会相互影响，所以就需要打包</span><br><span class="line">使用了require.js，</span><br><span class="line">amd：异步的模块定义</span><br><span class="line">对模块进行了定义，全局变量只在该模块中有效，对模块进行了一个定义common.js</span><br><span class="line">由于common只在node中有效，amd只在浏览器中有效</span><br><span class="line">这时候，为了统一，umd出现了，统一的模块定义，</span><br><span class="line">umd的核心是：如果存在define函数就用defined方式来定义，如果不存在就看有没有module，有module就是common.js,还没有就用scriot方式根据特征选择不停的模块定义方式</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">什么时候加dev</span><br><span class="line">判断标准：是否只给开发者用，若只给开发者用就dev,给用户用就不用加</span><br><span class="line">举例：</span><br><span class="line">React-不加</span><br><span class="line">webpack-加</span><br><span class="line">jQuery-不加</span><br><span class="line">TypeScript-加</span><br><span class="line"></span><br><span class="line">--save的含义</span><br><span class="line">会把依赖包名称添加到 package.json文件 dependencies键下</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 以下三个等价 save缩写S，dev缩写D，S是默认的</span><br><span class="line">npm install --save webpack</span><br><span class="line">npm install -S webpack</span><br><span class="line">npm install webpack</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 以下两个等价</span><br><span class="line">npm install --save-dev webpack</span><br><span class="line">npm install -D webpack</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">yarn add </span><br><span class="line">yarn add --dev</span><br></pre></td></tr></table></figure>


<h5 id="5-配置webpack-dev-server与webpack-config-dev-js"><a href="#5-配置webpack-dev-server与webpack-config-dev-js" class="headerlink" title="5. 配置webpack-dev-server与webpack.config.dev.js"></a>5. 配置webpack-dev-server与webpack.config.dev.js</h5><h5 id="开发环境的webpack配置"><a href="#开发环境的webpack配置" class="headerlink" title="(开发环境的webpack配置)"></a>(开发环境的webpack配置)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">由于index.tsx每次改变之后，都要再执行一次npx webpack，用webpacl-dev-server来解决慢和没有自动打包的问题</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">使用：</span><br><span class="line"> - 安装：yarn add webpack-dev-server --dev</span><br><span class="line"> - 运行：npx webpack-dev-server</span><br><span class="line"> - 打开网页： http:&#x2F;&#x2F;localhost:8080&#x2F;index.js</span><br><span class="line"></span><br><span class="line">就可以动态的得到随时编译的代码</span><br><span class="line"></span><br><span class="line">可以发现index.jsx中仅有的console.log(&#39;hi&#39;)，打包后为了兼容环境 ，在lib&#x2F;index.js中变成了好多好多代码，http:&#x2F;&#x2F;localhost:8080&#x2F;index.js的结果中就是lib&#x2F;index.js中的内容，</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">webpack-dev-server的原理：</span><br><span class="line">没有webpack-dev-server，把一个文件打包成另一个文件用的是webpack</span><br><span class="line"></span><br><span class="line">webpack-dev-server，开了一个server，默认监听的是8080端口，这个8080可以接受不同的请求，例如：请求的是127.0.0.1:8080&#x2F;1.js，(实际上1.js是不存在的)，这时候server就去找，发现了1.tsx，把它翻译成1.js，</span><br><span class="line">注意这里没有翻译成文件，只是把1.js翻译成了字符串，放到了内存中，放在内存中的好处是响应速度快</span><br><span class="line"></span><br><span class="line">简言之：</span><br><span class="line">先把1.tsx翻译成1.js放在了内存中，等用户访问1.js的时候，直接从内存中把1.js抛出去，用户就拿到了1.js</span><br></pre></td></tr></table></figure>


<h5 id="6-创建index-html-把js放到html中运行"><a href="#6-创建index-html-把js放到html中运行" class="headerlink" title="6. 创建index.html(把js放到html中运行)"></a>6. 创建index.html(把js放到html中运行)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 1、在根目录下新建文件index.html</span><br><span class="line">&#x2F;&#x2F; 2、引入js的时候，当js的文件名改变之后，html中每次都要手动去改</span><br><span class="line">&#x2F;&#x2F; 3、配置webpack, 让html中的js文件名自动生成</span><br><span class="line">&#x2F;&#x2F; 4、 安装插件 html-webpack-plugin</span><br><span class="line"></span><br><span class="line">安装：yarn add html-webpack-plugin --dev</span><br><span class="line">使用：</span><br><span class="line">&#x2F;&#x2F;webpack.config.js</span><br><span class="line">const HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;)</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(&#123;</span><br><span class="line">    title: &#39;TAQUI&#39;, &#x2F;&#x2F; 在html中配置之后生效&lt;title&gt;&lt;%&#x3D; htmlWebpackPlugin.options.title %&gt;&lt;&#x2F;title&gt;</span><br><span class="line">    template: &#39;index.html&#39; &#x2F;&#x2F; 原来的html是什么</span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 在lib&#x2F;index.tsx中</span><br><span class="line">const div &#x3D; document.createElement(&#39;div&#39;);</span><br><span class="line">div.innerText&#x3D;&#39;div&#39;;</span><br><span class="line">document.body.appendChild(div);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; index.html中只保留最初html, 没有了script，tsx还是会执行</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">你好呀</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 运行</span><br><span class="line">npx webpack-dev-server</span><br><span class="line">&#x2F;&#x2F; 查看网页源代码</span><br><span class="line">&lt;!doctype html&gt; 你好呀&lt;script src&#x3D;&quot;index.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">这里最后插入的index.js就是这个插件的作用</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">index.html 默认变成了webpack-dev-server的首页</span><br><span class="line">只要改js, js就会自动在首页上运行</span><br></pre></td></tr></table></figure>

<h5 id="7-用yarn代替npx-将npx命令写入package-json中"><a href="#7-用yarn代替npx-将npx命令写入package-json中" class="headerlink" title="7. 用yarn代替npx(将npx命令写入package.json中)"></a>7. 用yarn代替npx(将npx命令写入package.json中)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,</span><br><span class="line">   &quot;start&quot;: &quot;webpack-dev-server&quot; &#x2F;&#x2F; 运行-yarn start</span><br><span class="line">   &quot;build&quot;: &quot;webpack&quot;, &#x2F;&#x2F; 打包-yarn-build</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">怎么验证是否配置正确</span><br><span class="line">运行： yarn start</span><br><span class="line">打开：http:&#x2F;&#x2F;localhost:8080&#x2F;</span><br><span class="line">不报错，lib&#x2F;index.tsx中的内容正常显示</span><br><span class="line">可以愉快的进行开发啦</span><br><span class="line">还不知道写ts要配置写什么，这周继续踩坑啦</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">安装react reactdom:</span><br><span class="line">yarn add react react-dom</span><br><span class="line">安装类型:</span><br><span class="line">yarn add @types&#x2F;react --dev</span><br><span class="line">&#x2F;&#x2F; 在ts项目中，除了要安装源代码之外，还要安装类型声明文件</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; webpack的配置文件中添加文件后缀解析配置</span><br><span class="line">resolve: &#123; &#x2F;&#x2F; 解析</span><br><span class="line">  extensions: [&#39;.ts&#39;, &#39;.tsx&#39;, &#39;.js&#39;, &#39;.jsx&#39;],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 测试写一个button</span><br><span class="line">&#x2F;&#x2F; lib&#x2F;button.tsx</span><br><span class="line">import React from &#39;react&#39;;</span><br><span class="line">function Button() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;button22&lt;&#x2F;div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Button</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; tsx文件必须引入react，不然会报错</span><br><span class="line">function Button()&#123;</span><br><span class="line">  return(</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      按钮</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Button;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 上面的代码，查看babel翻译后的</span><br><span class="line">babel online 查看？？？？</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 对比</span><br><span class="line">react中写标签，其实写的是createElement的函数调用，所以，tsx文件必须引入react</span><br><span class="line">三个参数：type  props  children</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 这时候运行 会有warning(因为把react打包了)</span><br><span class="line">WARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).</span><br><span class="line">This can impact web performance.</span><br><span class="line">Assets: </span><br><span class="line">  index.js (274 KiB)</span><br><span class="line"></span><br><span class="line">在f12下查看，index.js  Size  response</span><br><span class="line">  </span><br><span class="line">&#x2F;&#x2F; 解决方案</span><br><span class="line">1、修改webpack.config.js配置中的mode值</span><br><span class="line">mode: &#39;production&#39;, &#x2F;&#x2F; production  由开发模式改为生产模式</span><br><span class="line">mode的作用会影响代码的最终效果，production：会压缩所有代码变成一行， development 不会压缩代码</span><br><span class="line"></span><br><span class="line">2、webpack配置，不打包react（把react从源码中排除）</span><br><span class="line">webpack.config.js中添加</span><br><span class="line"> externals: &#123;</span><br><span class="line">    react: &#123;</span><br><span class="line">      commonjs: &#39;react&#39;, &#x2F;&#x2F; 打包成那种形式，别人怎么引用  var react &#x3D; require(&#39;react)&#x2F;&#x2F; 就是require后面的名字</span><br><span class="line">      commonjs2: &#39;react&#39;, &#x2F;&#x2F; node js的标准</span><br><span class="line">      amd: &#39;react&#39;, &#x2F;&#x2F; 浏览器的 标准</span><br><span class="line">      root: &#39;React&#39;, &#x2F;&#x2F; script方式引入</span><br><span class="line">    &#125;,</span><br><span class="line">    &#39;react-dom&#39;: &#123;</span><br><span class="line">      commonjs: &#39;react-dom&#39;,</span><br><span class="line">      commonjs2: &#39;react-dom&#39;,</span><br><span class="line">      amd: &#39;react-dom&#39;,</span><br><span class="line">      root: &#39;ReactDOM&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">externals的作用：告诉webpack  , react和react-dom是外部的库，不属于内部的库   四个值分别对应js历史上不同的打包工具</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 验证</span><br><span class="line">运行：yarn build</span><br><span class="line">查看dist&#x2F;index.js    大小为：4K</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">开发环境和生产环境的区别</span><br><span class="line">每次修改mode值的解决方案（开发时为devlopment, 部署时为production）:</span><br><span class="line"></span><br><span class="line">新建webpack.config.dev.js(开发时候用)</span><br><span class="line">新建webpack.config.pros.js(部署时候用)</span><br><span class="line">已有的webpacl.config.js写共用的</span><br><span class="line"></span><br><span class="line">config的本质是一个模块导出一个对象</span><br><span class="line">根据对象覆盖的方式分成两个</span><br><span class="line">&#x2F;&#x2F;方法(复制属性，why not扩展运算符，nodejs可能不支持)</span><br><span class="line">&#x2F;&#x2F; 三个参数</span><br><span class="line">&#x2F;&#x2F; 1、空对象</span><br><span class="line">&#x2F;&#x2F; 2、base(共有的webpack),把base的属性复制到空对象上面，这个对象拥有了base的所有属性</span><br><span class="line">&#x2F;&#x2F; 3、把额外的属性再复制到上面，最终拥有两个对象的属性</span><br><span class="line">const base &#x3D; require(&#39;.&#x2F;webpack.config.js&#39;) &#x2F;&#x2F; base 随便起    .js可加可不加</span><br><span class="line">Object.assign(&#123;&#125;, base, &#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">区分这几个webpack（在pack.json中）</span><br><span class="line">&quot;start&quot;: &quot;webpack-dev-server --config webpack.config.dev.js&quot;,</span><br><span class="line">&quot;build&quot;: &quot;webpack --config webpack.config.prod.js&quot;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; 需要安装一个库cross-env,兼容win</span><br><span class="line">&quot;start&quot;: &quot;cross-env NODE_ENV&#x3D;development webpack-dev-server --config webpack.config.dev.js&quot;,</span><br><span class="line">&quot;build&quot;: &quot;cross-env NODE_ENV&#x3D;production webpack --config webpack.config.prod.js&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 验证</span><br><span class="line">yarn start  1.4 M</span><br><span class="line">yarn build  4K</span><br><span class="line"></span><br><span class="line">总结：</span><br><span class="line">1、把共有的属性提到webpack.config.js中</span><br><span class="line">开发环境写开发的</span><br><span class="line">生产环境写生产的</span><br><span class="line">三个配置文件，它们之间是复制的关系</span><br><span class="line">2、在pack.json中指定文件</span><br><span class="line">start是开发</span><br><span class="line">build是生产</span><br></pre></td></tr></table></figure>


<h5 id="8-配置测试-Jest"><a href="#8-配置测试-Jest" class="headerlink" title="8.配置测试  Jest"></a>8.配置测试  Jest</h5><p>单元测试<br>react 社区最流行测测试  官配的测试框架 Jest<br>看官网: <a href="https://jestjs.io/docs/zh-Hans/getting-started" target="_blank" rel="noopener">https://jestjs.io/docs/zh-Hans/getting-started</a><br>使用和不是用react脚手架<br>用yarn  不用npm 的趋势<br>查看react部分  <a href="https://jestjs.io/docs/zh-Hans/tutorial-react" target="_blank" rel="noopener">https://jestjs.io/docs/zh-Hans/tutorial-react</a><br>安装：yarn add –dev jest babel-jest @babel/preset-env @babel/preset-react react-test-renderer</p>
<p>babel.rc    babel.config   任意选用</p>
<p>新建文件：.babelrc</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; json格式</span><br><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    &quot;react-app&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package.json  测试命令</span><br><span class="line">&quot;test&quot;: &quot;cross-env NODE_ENV&#x3D;test jest --config&#x3D;jest.config.js --runInBand&quot;,</span><br><span class="line">运行的是jest命令   config   参数</span><br><span class="line">再创建一个jest.config.js</span><br><span class="line">webpack的配置都要在这边配一遍，jest不会去读webpack.config.js</span><br></pre></td></tr></table></figure>


<hr>
<ul>
<li>一些杂碎记录<h5 id="yarn-lock文件的作用："><a href="#yarn-lock文件的作用：" class="headerlink" title="yarn.lock文件的作用："></a>yarn.lock文件的作用：</h5></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn的lock文件</span><br><span class="line">锁定所有依赖的版本的文件</span><br></pre></td></tr></table></figure>

<h5 id="将代码上传到多个远程仓库（github技巧）"><a href="#将代码上传到多个远程仓库（github技巧）" class="headerlink" title="将代码上传到多个远程仓库（github技巧）"></a>将代码上传到多个远程仓库（github技巧）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">一个本地仓库，上传到多个远程仓库，添加另外一个名字的远程仓库名</span><br><span class="line">新建仓库之后，将origin 改写：</span><br><span class="line">git remote add origin git@github.com:fkitty&#x2F;myui-test-03.git</span><br><span class="line">git push -u origin master</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 在本地仓库的根目录下执行</span><br><span class="line">git remote add taqui-3 git@github.com:fkitty&#x2F;myui-test-03.git</span><br><span class="line">git push -u taqui-3 master</span><br></pre></td></tr></table></figure>
            
                

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/webpack/" rel="tag">webpack</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2020/05/31/%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/"  data-tooltip="数组操作（一）">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2020/05/17/Class%E7%BB%84%E4%BB%B6-VS-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6/" data-tooltip="Class组件 VS 函数式组件">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 爱前端的安安. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2020/05/31/%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/"  data-tooltip="数组操作（一）">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2020/05/17/Class%E7%BB%84%E4%BB%B6-VS-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6/" data-tooltip="Class组件 VS 函数式组件">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/">
                <i class="fa fa-google-plus"></i><span class="">分享到 Google+</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/">
                <i class="fa fa-facebook-official"></i><span>分享到 Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2020/05/24/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-webpack/">
                <i class="fa fa-twitter"></i><span>分享到 Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/test1.gif"/>
        
            <h4 id="about-card-name">爱前端的安安</h4>
        
            <h5 id="about-card-bio"><p>不忘初心，砥砺前行</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>web前端开发</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                shangHai
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/test.png');"></div>
    </body>
    <!--SCRIPTS-->

<script src="/assets/js/scrip-gfmrkxcl0qohe3cfdgxhzvc0yrceqta8i4iix0txvn8q4o2adlqd5n0jmkvt.min.js"></script>
<script href="/.css" src="/.js"></script>

<!--SCRIPTS END-->

    



</html>
